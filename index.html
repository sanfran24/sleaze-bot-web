<!DOCTYPE html>
<html lang="en">
<head>
     <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Bling Magazine: Keanu VHS Edition</title>
  <link rel="icon" href="data:,">
     <style>
     @font-face {
       font-family: 'Antique Olive LT Nord';
       src: url('Antique Olive LT Nord.ttf') format('truetype');
       font-weight: normal;
       font-style: normal;
     }
     
          body { 
       background: radial-gradient(ellipse at top, #1a0933, #000); /* fallback bg if starry gif missing */
        color: #fff; 
        font-family: 'Antique Olive LT Nord', Arial, sans-serif; 
        margin: 0; 
        padding: 10px; 
        overflow-x: hidden;
      }
    table { 
      width: 100%; 
      border: 2px outset silver;
      background: linear-gradient(to bottom, #666, #333); 
      box-shadow: 0 0 10px purple; /* Purple glow for meme tint */
    }
    th, td { 
      padding: 10px; 
      border: 1px inset silver;
    }
         .header { 
       text-align: center; 
       font-size: 24px; 
       color: purple; 
       text-shadow: 0 0 5px #fff; 
       animation: bounce 3s infinite; /* Bouncing animation */
       font-family: 'Antique Olive LT Nord', Arial, sans-serif;
       position: relative;
     }
         @keyframes blink { 50% { opacity: 0.5; } }
     @keyframes bounce {
       0% { transform: translateX(-100%); }
       25% { transform: translateX(0%); }
       50% { transform: translateX(100%); }
       75% { transform: translateX(0%); }
       100% { transform: translateX(-100%); }
     }
         #flipbook { 
       width: 900px; 
       height: 600px; 
       margin: 20px auto; 
       border: 5px double silver;
       background: #000;
     }
     
     /* Mobile responsive styles */
     @media (max-width: 768px) {
       body {
         padding: 5px;
         font-size: 14px;
       }
       
       table {
         width: 100%;
         font-size: 12px;
       }
       
       th, td {
         padding: 5px;
       }
       
       .header {
         font-size: 18px;
         animation: bounce 2s infinite;
       }
       
       #flipbook {
         width: 100%;
         height: 400px;
         margin: 10px auto;
       }
       
                       .media-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: 5px;
          margin: 10px 0;
        }
       
       .media-grid img, .media-grid video {
         height: 80px;
       }
       
       .bling-title {
         font-size: 24px;
       }
       
       .keanu-quote {
         font-size: 14px;
       }
       
       .nav-button {
         padding: 8px 6px;
         font-size: 12px;
         margin: 3px 0;
       }
       
       .control-btn {
         padding: 8px 12px;
         font-size: 12px;
         margin: 0 2px;
       }
       
       .controls {
         margin: 10px 0;
       }
       
       .scrollable-sidebar {
         max-height: 200px;
       }
       
       .scrollable-sidebar img, .scrollable-sidebar video {
         height: 60px;
       }
       
       .video-catalog {
         margin-top: 20px;
         padding: 15px;
       }
       
       .video-catalog h2 {
         font-size: 20px;
       }
       
       .video-grid {
         grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
         gap: 15px;
       }
       
       .video-item video {
         height: 150px;
       }
       
       .modal-content {
         width: 95%;
         margin: 10% auto;
         padding: 15px;
       }
       
       .modal img, .modal video {
         max-height: 300px;
       }
       
       .modal-caption {
         font-size: 14px;
       }
       
       .stats {
         font-size: 11px;
         padding: 8px;
       }
       
       .stats p {
         margin: 3px 0;
       }
     }
     
     @media (max-width: 480px) {
                       .media-grid {
          grid-template-columns: 1fr;
          gap: 8px;
        }
       
       .media-grid img, .media-grid video {
         height: 120px;
       }
       
       .video-grid {
         grid-template-columns: 1fr;
       }
       
       .header {
         font-size: 16px;
       }
       
       .bling-title {
         font-size: 20px;
       }
       
       .nav-button {
         padding: 6px 4px;
         font-size: 11px;
       }
       
       .control-btn {
         padding: 6px 8px;
         font-size: 11px;
         margin: 0 1px;
       }
     }
              .page { 
      background: repeating-linear-gradient(0deg, #2a2a2a 0px, #2a2a2a 2px, #242424 2px, #242424 4px); /* Faux magazine paper */
       text-align: center; 
       padding: 20px; 
       box-sizing: border-box;
       position: relative;
     }
         .page img, .page video { 
       max-width: 80%; 
       height: auto; 
       border: 3px solid purple;
       box-shadow: 0 0 15px rgba(128, 0, 128, 0.5); /* Enhance the purple tint */
     }
              .media-grid {
       display: grid;
       grid-template-columns: repeat(4, 1fr);
       gap: 10px;
       margin: 15px 0;
     }
         .media-grid img, .media-grid video {
       width: 100%;
       height: 120px;
       object-fit: cover;
       border: 2px solid purple;
       box-shadow: 0 0 10px rgba(128, 0, 128, 0.5);
       transition: all 0.3s ease;
     }
    .media-grid img:hover, .media-grid video:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(128, 0, 128, 0.8);
      z-index: 10;
    }
              .caption { 
       font-style: italic; 
       color: #ccc; 
       margin-top: 10px; 
       text-shadow: 0 0 3px purple;
     }
         .nav-button { 
       background: linear-gradient(#999, #666); 
       color: #fff; 
       padding: 5px 10px; 
       border: 1px outset silver; 
       text-decoration: none; 
       display: block;
       margin: 5px 0;
       text-align: center;
       font-family: 'Antique Olive LT Nord', Arial, sans-serif;
     }
    .nav-button:hover { 
      background: linear-gradient(#bbb, #888); 
      box-shadow: 0 0 10px purple;
    }
    .controls {
      text-align: center;
      margin: 20px 0;
    }
         .control-btn {
       background: linear-gradient(#666, #333);
       color: #fff;
       padding: 10px 20px;
       border: 2px outset silver;
       margin: 0 5px;
       cursor: pointer;
       font-weight: bold;
       font-family: 'Antique Olive LT Nord', Arial, sans-serif;
     }
    .control-btn:hover {
      background: linear-gradient(#888, #555);
      box-shadow: 0 0 10px purple;
    }
              .page-number {
       position: absolute;
       bottom: 10px;
       right: 10px;
       font-size: 12px;
       color: #999;
     }
    .vhs-effect {
      position: relative;
    }
    .vhs-effect::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(transparent 50%, rgba(255, 0, 255, 0.1) 50%);
      background-size: 100% 4px;
      pointer-events: none;
      z-index: 1;
    }
         .bling-title {
       font-size: 36px;
       color: #ffd700;
       text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
       margin-bottom: 20px;
       font-weight: bold;
       font-family: 'Antique Olive LT Nord', Arial, sans-serif;
     }
         .keanu-quote {
       font-style: italic;
       color: #00ff00;
       text-shadow: 0 0 5px #00ff00;
       font-size: 18px;
       margin: 15px 0;
       font-family: 'Antique Olive LT Nord', Arial, sans-serif;
     }
    .loading {
      text-align: center;
      padding: 50px;
      font-size: 24px;
      color: #ffd700;
    }
    .stats {
      background: rgba(0, 0, 0, 0.5);
      padding: 10px;
      border-radius: 5px;
      margin: 10px 0;
      border-left: 3px solid purple;
    }
    
    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(5px);
    }
    
    .modal-content {
      background: linear-gradient(45deg, #1a0033, #330066, #660099);
      margin: 5% auto;
      padding: 20px;
      border: 3px solid purple;
      border-radius: 15px;
      width: 80%;
      max-width: 600px;
      box-shadow: 0 0 30px rgba(128, 0, 128, 0.8);
      position: relative;
    }
    
         .modal img, .modal video {
       width: 100%;
       max-height: 400px;
       object-fit: contain;
       border: 2px solid #ffd700;
       border-radius: 10px;
       margin-bottom: 15px;
     }
    
         .modal-caption {
       color: #ffd700;
       font-size: 18px;
       font-style: italic;
       text-align: center;
       text-shadow: 0 0 10px #ff00ff;
       margin: 15px 0;
       line-height: 1.4;
       font-family: 'Antique Olive LT Nord', Arial, sans-serif;
     }
    
    .close {
      color: #ffd700;
      float: right;
      font-size: 28px;
      font-weight: bold;
      cursor: pointer;
      position: absolute;
      top: 10px;
      right: 15px;
    }
    
    .close:hover {
      color: #ff00ff;
      text-shadow: 0 0 10px #ff00ff;
    }
    
         /* Scrollable sidebar */
     .scrollable-sidebar {
       max-height: 400px;
       overflow-y: auto;
       border: 2px solid purple;
       border-radius: 10px;
       padding: 10px;
       background: rgba(0, 0, 0, 0.3);
     }
     
           .scrollable-sidebar img, .scrollable-sidebar video {
        width: 100%;
        height: 80px;
        object-fit: cover;
        border: 1px solid purple;
        margin: 5px 0;
        cursor: pointer;
        transition: all 0.3s ease;
      }
     
     .scrollable-sidebar img:hover, .scrollable-sidebar video:hover {
       transform: scale(1.05);
       box-shadow: 0 0 15px rgba(128, 0, 128, 0.8);
       border-color: #ffd700;
     }
     
     /* Video catalog section */
     .video-catalog {
       margin-top: 30px;
       padding: 20px;
       background: rgba(0, 0, 0, 0.5);
       border: 2px solid purple;
       border-radius: 15px;
       box-shadow: 0 0 20px rgba(128, 0, 128, 0.5);
     }
     
           .video-catalog h2 {
        text-align: center;
        color: #ffd700;
        font-size: 28px;
        margin-bottom: 20px;
        text-shadow: 0 0 10px #ff00ff;
        font-family: 'Antique Olive LT Nord', Arial, sans-serif;
      }
     
     .video-grid {
       display: grid;
       grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
       gap: 20px;
       margin-top: 20px;
     }
     
     .video-item {
       background: linear-gradient(45deg, #1a0033, #330066);
       border: 2px solid purple;
       border-radius: 10px;
       padding: 15px;
       text-align: center;
       transition: all 0.3s ease;
       cursor: pointer;
     }
     
     .video-item:hover {
       transform: translateY(-5px);
       box-shadow: 0 0 25px rgba(128, 0, 128, 0.8);
       border-color: #ffd700;
     }
     
           .video-item video {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border: 2px solid purple;
        border-radius: 8px;
        margin-bottom: 10px;
      }
     
     .video-item h3 {
       color: #ffd700;
       font-size: 16px;
       margin: 10px 0;
       text-shadow: 0 0 5px #ff00ff;
     }
     
     .video-item p {
       color: #ccc;
       font-size: 12px;
       margin: 5px 0;
     }
     
     /* Sleaze Bot Styles */
     .sleaze-bot-section {
       margin-top: 30px;
       padding: 20px;
       background: rgba(0, 0, 0, 0.8);
       border: 3px solid #ffd700;
       border-radius: 15px;
       box-shadow: 0 0 30px rgba(255, 215, 0, 0.6);
       animation: glow 2s ease-in-out infinite alternate;
     }
     
     @keyframes glow {
       from { box-shadow: 0 0 30px rgba(255, 215, 0, 0.6); }
       to { box-shadow: 0 0 50px rgba(255, 215, 0, 0.8); }
     }
     
     .sleaze-bot-container h2 {
       text-align: center;
       color: #ffd700;
       font-size: 32px;
       margin-bottom: 15px;
       text-shadow: 0 0 15px #ff00ff;
       font-family: 'Antique Olive LT Nord', Arial, sans-serif;
     }
     
     .sleaze-upload-area {
       text-align: center;
       margin: 30px 0;
       padding: 30px;
       background: linear-gradient(45deg, #1a0033, #330066);
       border: 2px solid #ffd700;
       border-radius: 10px;
       border-style: outset;
     }
     
     .upload-hint {
       color: #ccc;
       font-size: 14px;
       margin-top: 15px;
       font-style: italic;
     }
     
     .sleaze-result-area {
       margin: 30px 0;
       min-height: 200px;
       text-align: center;
     }
     
     .sleaze-result {
       background: linear-gradient(45deg, #1a0033, #330066);
       border: 2px solid #ffd700;
       border-radius: 10px;
       padding: 20px;
       margin: 20px 0;
     }
     
     .sleaze-result h3 {
       color: #ffd700;
       font-size: 24px;
       margin-bottom: 15px;
       text-shadow: 0 0 10px #ff00ff;
     }
     
     .sleaze-info {
       background: rgba(128, 0, 128, 0.3);
       border: 2px solid purple;
       border-radius: 10px;
       padding: 20px;
       margin-top: 30px;
     }
     
     .sleaze-info h3 {
       color: #ffd700;
       font-size: 20px;
       margin-bottom: 15px;
       text-shadow: 0 0 8px #ff00ff;
     }
     
     .sleaze-info ul {
       color: #ccc;
       text-align: left;
       padding-left: 20px;
     }
     
     .sleaze-info li {
       margin: 8px 0;
       font-size: 14px;
     }
     
     .loading {
       color: #ffd700;
       font-size: 18px;
       font-weight: bold;
       text-shadow: 0 0 10px #ff00ff;
       animation: blink 1s infinite;
     }
     
     .style-buttons {
       display: grid;
       grid-template-columns: repeat(3, 1fr);
       gap: 10px;
       margin: 20px 0;
     }
     
     .style-btn {
       background: linear-gradient(to bottom, #800080, #4b0082);
       color: white;
       border: 2px outset silver;
       padding: 10px;
       cursor: pointer;
       font-family: 'Antique Olive LT Nord', Arial, sans-serif;
       font-size: 14px;
       border-radius: 5px;
       transition: all 0.3s ease;
     }
     
     .style-btn:hover {
       background: linear-gradient(to bottom, #ff6b6b, #ee5a24);
       transform: scale(1.05);
       box-shadow: 0 0 10px purple;
     }
     
     .image-preview {
       text-align: center;
       padding: 20px;
     }
     
     .error {
       color: #ff6b6b;
       font-size: 16px;
       background: rgba(255, 107, 107, 0.2);
       border: 2px solid #ff6b6b;
       border-radius: 8px;
       padding: 15px;
       margin: 20px 0;
     }
  </style>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/turn.js/3/turn.min.js"></script>
</head>
<body>
  <table>
    <tr>
             <th colspan="3" class="header">Keanu Sleaze</th>
    </tr>
    <tr>
      <td width="20%" valign="top">
        <!-- Sidebar: Thumbnails or "Ads" -->
                 <h3>Quick Links</h3>
         <button class="nav-button" onclick="window.open('https://www.tiktok.com/@keanusleaze?_t=ZP-8z2bMkVYdgs&_r=1', '_blank')">TikTok</button>
         <button class="nav-button" onclick="window.open('https://www.instagram.com/KeanuSleaze/', '_blank')">Instagram</button>
         <button class="nav-button" onclick="window.open('https://dexscreener.com/solana/avy6dianut5per7xf6hixesfaggm84dbmwwgw5xectvf', '_blank')">DexScreener</button>
         <button class="nav-button" onclick="window.open('https://memedepot.com/d/sleaze', '_blank')">Meme Depot</button>
         <button class="nav-button" onclick="window.open('https://x.com/KeanuSleaze', '_blank')">X (Twitter)</button>
         <button class="nav-button" id="sleaze-toggle" onclick="toggleSleazeBot()" style="background: linear-gradient(to bottom, #ff6b6b, #ee5a24);">Hide Sleaze Bot</button>
        
        <h3>Bling Stats</h3>
        <div class="stats">
          <p>Total Files: <span id="total-files">Loading...</span></p>
          <p>Images: <span id="image-count">Loading...</span></p>
          <p>Videos: <span id="video-count">Loading...</span></p>
          <p>Pages: <span id="page-count">Loading...</span></p>
          <p>VHS Quality: Maximum</p>
          <p>Purple Factor: 9000+</p>
        </div>
      </td>
             <td width="60%" valign="top">
         <!-- Main Flipbook -->
         <div id="flipbook" class="vhs-effect">
           <div class="loading">Loading your bling content...</div>
         </div>
         
         <div class="controls">
           <button class="control-btn" onclick="try { $('#flipbook').turn('previous'); } catch(e) { console.error('Error going to previous page:', e); }">‚Üê Previous</button>
           <button class="control-btn" onclick="try { $('#flipbook').turn('next'); } catch(e) { console.error('Error going to next page:', e); }">Next ‚Üí</button>
           <button class="control-btn" onclick="try { $('#flipbook').turn('page', 1); } catch(e) { console.error('Error going to first page:', e); }">First Page</button>
           <button class="control-btn" onclick="refreshContent()">Refresh Content</button>
         </div>
      </td>
             <td width="20%" valign="top">
         <!-- Right Sidebar: More "2000s clutter" -->
         <h3>Featured Bling</h3>
         <div class="scrollable-sidebar" id="featured-content">
           <p>Loading featured content...</p>
         </div>
        
                 <h3>Prompt</h3>
                   <p>[CHARACHTER] caught off guard slightly squinting because of the camera flash, smiling wide with a shiny diamond-encrusted grill. His wrist is raised close to his mouth to flex a massive diamond-covered wristwatch and a sparkling diamond ring. He looks mischievous and faded, like he's having the most fun up to no good. The photo has subtle motion blur and a retro disposable camera flash effect, like a candid party snapshot mid-movement. Dark, moody background with a bluish-purple tint, strong blue retro VHS party filter overlay with slight analog distortion, cinematic old photograph aesthetic. The diamonds sparkle brightly, exaggerated surreal luxury vibe.</p>
        
        
      </td>
    </tr>
    <tr>
      <td colspan="3" style="text-align:center;">&copy; 2025 Bling Mag - All Rights Reserved | VHS Quality Guaranteed</td>
         </tr>
   </table>

   <!-- Sleaze Bot Section -->
   <div class="sleaze-bot-section" id="sleaze-bot-section" style="display: block;">
     <div class="sleaze-bot-container">
       <h2>üíé Sleaze Bot - Transform Your Image üíé</h2>
       <p class="keanu-quote">"Whoa... let's add some serious bling to your photo!"</p>
       
               <div class="sleaze-upload-area">
          <input type="file" id="image-upload" accept="image/*" style="display: none;" onchange="handleImageUpload(event)">
          <button id="upload-btn" class="control-btn" onclick="document.getElementById('image-upload').click()" style="font-size: 18px; padding: 15px 30px; background: linear-gradient(to bottom, #ffd700, #ffb347); color: #000; font-weight: bold; border: 3px outset #ffd700;">
            üíé Transform to Sleaze üíé
          </button>
          <p class="upload-hint">Click to upload an image and add luxury bling!</p>
          <p style="color: #ffd700; font-size: 12px; margin-top: 10px;">‚ú® Supports: JPG, PNG, GIF, WebP ‚ú®</p>
        </div>
       
               <div id="sleaze-result" class="sleaze-result-area">
          <!-- Results will appear here -->
          <div style="text-align: center; margin: 20px 0; padding: 20px; background: rgba(255, 215, 0, 0.1); border: 2px dashed #ffd700; border-radius: 10px;">
            <h3 style="color: #ffd700; margin-bottom: 15px;">üé¨ Sleaze Transformation Preview</h3>
                         <p style="color: #ccc; font-size: 14px; line-height: 1.6;">
               Upload your photo and watch it transform with:<br>
               üíé Diamond-encrusted grill ‚Ä¢ ‚åö Massive diamond wristwatch ‚Ä¢ üíç Sparkling diamond ring<br>
               üì∏ Candid party snapshot effect ‚Ä¢ üé¨ Retro VHS filter ‚Ä¢ üåü Exaggerated luxury vibe!
             </p>
          </div>
        </div>
       
       <div class="sleaze-info">
         <h3>What the Sleaze Bot Does:</h3>
         <ul>
           <li>‚ú® Adds diamond-encrusted grill to your teeth</li>
           <li>‚åö Gives you a luxurious diamond-covered wristwatch</li>
           <li>üíç Adds a diamond ring to your finger</li>
           <li>üé¨ Creates a retro cinematic effect with purple-blue lighting</li>
           <li>üì∏ Maintains your original appearance while adding the bling</li>
         </ul>
       </div>
     </div>
   </div>

   <!-- Video Catalog Section -->
   <div class="video-catalog">
     <h2>Video Catalog</h2>
     <div class="video-grid" id="video-catalog-grid">
       <p>Loading videos...</p>
     </div>

   </div>

   <!-- Modal for image/video popup -->
   <div id="imageModal" class="modal">
     <div class="modal-content">
       <span class="close">&times;</span>
       <div id="modal-media"></div>
       <div class="modal-caption" id="modal-caption"></div>
     </div>
   </div>

  <script>
    let allMediaFiles = [];
    let currentPage = 1;
    let totalPages = 0;
    
    // Media file extensions
    const imageExtensions = ['.jpg', '.jpeg', '.png', '.gif', '.bmp', '.webp'];
    const videoExtensions = ['.mp4', '.avi', '.mov', '.wmv', '.flv', '.webm'];
    
         // Bling-themed captions for modal
     const blingCaptions = [
       "Stackin' paper while rockin' this watch - that's how we do it!",
       "Grillz so bright, they light up the whole block!",
       "Money talks, but this bling screams!",
       "When you got this much shine, the haters can't even look!",
       "This watch cost more than your car - and it's worth every penny!",
       "Flexin' hard with the ice on my wrist!",
       "Grillz so clean, they reflect the future!",
       "Stackin' bands while rockin' these chains!",
       "When you're this rich, even your teeth sparkle!",
       "This bling is the definition of 'money ain't a thing'!",
       "Watch game so strong, time itself bows down!",
       "Grillz so expensive, they come with their own security!",
       "Flexin' on the haters with pure gold!",
       "This is what success looks like in HD!",
       "When you got money like this, everything sparkles!",
       "Ice so cold, it keeps the haters frozen!",
       "This watch tells time, but this bling tells stories!",
       "Grillz so bright, they need their own power source!",
       "Stackin' paper while the world watches!",
       "This is the bling that dreams are made of!",
       "When you're this rich, even your shadow sparkles!",
       "Flexin' hard with the VHS aesthetic!",
       "This watch is so expensive, it has its own insurance!",
       "Grillz so clean, they make dentists jealous!",
       "This bling is the definition of 'money well spent'!",
       "When you got this much shine, the sun takes notes!",
       "Stackin' bands while the world takes pictures!",
       "This is what peak financial performance looks like!",
       "Grillz so bright, they need sunglasses!",
       "When you're this rich, even your mistakes sparkle!",
       "This bling is so expensive, it has its own bodyguard!",
       "Watch game so strong, it breaks the space-time continuum!",
       "Flexin' on the haters with pure platinum!",
       "This is the bling that legends are made of!",
       "When you got money like this, everything is gold!",
       "Grillz so clean, they make mirrors jealous!",
       "Stackin' paper while the world watches in HD!",
       "This bling is the definition of 'success looks expensive'!",
       "When you're this rich, even your problems sparkle!",
       "This watch is so expensive, it has its own Wikipedia page!",
       "Flexin' hard with the purple VHS vibes!",
       "Grillz so bright, they light up the whole neighborhood!",
       "This is what peak bling performance looks like!",
       "When you got this much shine, the stars take notes!",
       "Stackin' bands while the world takes selfies!",
       "This bling is so expensive, it has its own theme song!",
       "Watch game so strong, it makes time itself jealous!",
       "When you're this rich, even your jokes sparkle!",
       "This is the bling that dreams are made of!",
       "Grillz so clean, they make diamonds jealous!",
       "Flexin' on the haters with pure success!",
       "This bling is the definition of 'money well invested'!",
       "When you got money like this, everything is platinum!",
       "Stackin' paper while the world takes notes!",
       "This watch is so expensive, it has its own documentary!",
       "This is what peak financial freedom looks like!",
       "When you're this rich, even your thoughts sparkle!"
     ];

     // Keanu quotes for page captions
     const keanuQuotes = [
       "Whoa... that's some serious bling action.",
       "The Matrix has nothing on this bling.",
       "I know kung fu, and this bling is epic.",
       "There is no spoon, but there is bling.",
       "The bling chooses you, Harry... wait, wrong movie.",
       "This bling is bullet time approved.",
       "VHS quality, maximum bling.",
       "Purple haze, bling phase.",
       "The bling that started it all.",
       "Matrix-level shine achieved.",
       "Digital bling for analog souls.",
       "Analog bling for digital times.",
       "Retro bling, future vibes.",
       "Future bling, retro feels.",
       "Bling so good it bends reality.",
       "The bling is strong with this one."
     ];

    // Function to detect all media files
    function detectMediaFiles() {
      // Try to load the real file list first
      try {
        const response = fetch('media-files.json');
        if (response.ok) {
          return response.json().then(data => data.files);
        }
      } catch (error) {
        console.log('Could not load media-files.json, using fallback');
      }
      
      // Fallback: return an empty array and show message
      return [];
    }

                             // Function to create a page with 8 media items
      function createMediaPage(mediaItems, pageNumber, title) {
        const page = $(`
          <div class="page">
            <h2>${title}</h2>
            <div class="media-grid">
              ${mediaItems.map((item, index) => {
                return `<img src="${item.path}" alt="${item.filename}" data-filename="${item.filename}" data-type="image" data-path="${item.path}" onerror="this.style.display='none'">`;
              }).join('')}
            </div>
            <p class="caption">${keanuQuotes[Math.floor(Math.random() * keanuQuotes.length)]}</p>
            <div class="page-number">${pageNumber}</div>
          </div>
        `);
        
        return page;
      }

         // Function to organize media into pages
     function organizeMediaIntoPages(mediaFiles) {
       const pages = [];
       const itemsPerPage = 8;
       
       // Filter out only images for the magazine
       const imageFiles = mediaFiles.filter(f => f.type === 'image');
       
                       // Create cover page
        const coverPage = $(`
          <div class="page">
            <div class="bling-title">BLING MAGAZINE</div>
            <div class="keanu-quote">"Whoa... that's some serious bling action."</div>
            <img src="${imageFiles[0]?.path || 'images/bling-featured.jpg'}" alt="Cover Bling" onerror="this.style.display='none'">
            <p class="caption">VHS Edition - ${imageFiles.length} Images of Pure Bling</p>
            <div class="page-number">1</div>
          </div>
        `);
       pages.push(coverPage);
       
       // Create gallery pages with 8 items each
       for (let i = 0; i < imageFiles.length; i += itemsPerPage) {
         const pageItems = imageFiles.slice(i, i + itemsPerPage);
         const pageNumber = pages.length + 1;
         const title = `BLING GALLERY ${pageNumber}`;
         
         const page = createMediaPage(pageItems, pageNumber, title);
         pages.push(page);
       }
       
       return pages;
     }

    // Function to initialize the flipbook
    async function initializeFlipbook() {
      $('#flipbook').empty();
      $('#flipbook').html('<div class="loading">Loading your bling content...</div>');
      
      try {
        // Load media files
        const response = await fetch('media-files.json');
        if (response.ok) {
          const data = await response.json();
          allMediaFiles = data.files;
        } else {
          throw new Error('Could not load media files');
        }
        
        // Update stats
        const imageCount = allMediaFiles.filter(f => f.type === 'image').length;
        const videoCount = allMediaFiles.filter(f => f.type === 'video').length;
        
        $('#total-files').text(allMediaFiles.length);
        $('#image-count').text(imageCount);
        $('#video-count').text(videoCount);
        
        // Organize into pages
        const pages = organizeMediaIntoPages(allMediaFiles);
        totalPages = pages.length;
        
        $('#page-count').text(totalPages);
        $('#total-pages').text(`Total Pages: ${totalPages}`);
        
        // Clear loading message and add pages to flipbook
        $('#flipbook').empty();
        pages.forEach(page => {
          $('#flipbook').append(page);
        });
        
                 // Initialize Turn.js with responsive dimensions
         const isMobile = window.innerWidth <= 768;
         const flipbookWidth = isMobile ? window.innerWidth - 20 : 900;
         const flipbookHeight = isMobile ? 400 : 600;
         
         try {
           $("#flipbook").turn({
             width: flipbookWidth,
             height: flipbookHeight,
             autoCenter: true,
             gradients: true,
             acceleration: true,
             display: isMobile ? 'single' : 'double',
             when: {
                            turning: function(event, page, pageObject) {
                  currentPage = page;
                  
                  // Add VHS effect during page turns
                  $('.page').addClass('vhs-effect');
                  setTimeout(() => {
                    $('.page').removeClass('vhs-effect');
                  }, 500);
                }
             }
           });
         } catch (error) {
           console.error('Error initializing Turn.js:', error);
           $('#flipbook').html('<div class="loading">Error initializing flipbook. Please refresh the page.</div>');
         }
        
                 // Update featured content
         updateFeaturedContent();
         
         // Create video catalog
         createVideoCatalog();
        
      } catch (error) {
        console.error('Error loading media files:', error);
        $('#flipbook').html('<div class="loading">Error loading content. Please run "node scan-files.js" first.</div>');
      }
    }

         // Function to update featured content
     function updateFeaturedContent() {
       const imageFiles = allMediaFiles.filter(f => f.type === 'image');
       const randomFiles = imageFiles.sort(() => 0.5 - Math.random()).slice(0, 50);
       const featuredHTML = randomFiles.map(file => {
         return `<img src="${file.path}" alt="${file.filename}" data-filename="${file.filename}" data-type="image" data-path="${file.path}" onerror="this.style.display='none'">`;
       }).join('');
       
       $('#featured-content').html(featuredHTML);
     }

         // Function to create video catalog
     function createVideoCatalog() {
       const videoFiles = allMediaFiles.filter(f => f.type === 'video');
       
       if (videoFiles.length === 0) {
         $('#video-catalog-grid').html('<p>No videos found.</p>');
         return;
       }
       
       const videoHTML = videoFiles.map(file => {
         return `
           <div class="video-item" data-filename="${file.filename}" data-type="video" data-path="${file.path}">
             <video controls muted loop>
               <source src="${file.path}" type="video/mp4">
               Your browser does not support the video tag.
             </video>
             <p>Click to open in modal</p>
           </div>
         `;
       }).join('');
       
       $('#video-catalog-grid').html(videoHTML);
     }

     // Function to refresh content
     async function refreshContent() {
       try {
         await initializeFlipbook();
       } catch (error) {
         console.error('Error refreshing content:', error);
         $('#flipbook').html('<div class="loading">Error refreshing content. Please try again.</div>');
       }
     }

    // Initialize when document is ready
    $(document).ready(function() {
      // Initialize the flipbook
      initializeFlipbook().catch(error => {
        console.error('Failed to initialize flipbook:', error);
      });
      
             // Add hover effects to media
       $(document).on('mouseenter', '.media-grid img, .media-grid video', function() {
         $(this).css('filter', 'brightness(1.2)');
       });
       
       $(document).on('mouseleave', '.media-grid img, .media-grid video', function() {
         $(this).css('filter', 'none');
       });
      
             // Add click effects to navigation buttons (but don't prevent default for social links)
       $('.nav-button').click(function(e) {
         // Don't prevent default for social media buttons
         $(this).css('box-shadow', '0 0 20px purple');
         setTimeout(() => {
           $(this).css('box-shadow', '');
         }, 500);
       });
       
       // Modal functionality
       const modal = document.getElementById('imageModal');
       const modalMedia = document.getElementById('modal-media');
       const modalCaption = document.getElementById('modal-caption');
       const closeBtn = document.getElementsByClassName('close')[0];
       
       // Function to open modal
       function openModal(mediaElement) {
         try {
           const filename = mediaElement.dataset.filename;
           const type = mediaElement.dataset.type;
           const path = mediaElement.dataset.path;
           
           if (!path) {
             console.error('No path found for media element');
             return;
           }
           
           // Create media element for modal
           if (type === 'video') {
             modalMedia.innerHTML = `<video controls autoplay>
               <source src="${path}" type="video/mp4">
               Your browser does not support the video tag.
             </video>`;
           } else {
             modalMedia.innerHTML = `<img src="${path}" alt="${filename || 'Image'}" onerror="this.style.display='none'">`;
           }
           
           // Add random bling caption
           const randomCaption = blingCaptions[Math.floor(Math.random() * blingCaptions.length)];
           modalCaption.textContent = randomCaption;
           
           // Show modal
           modal.style.display = 'block';
           
           // Add VHS effect to modal
           modal.classList.add('vhs-effect');
         } catch (error) {
           console.error('Error opening modal:', error);
         }
       }
       
       // Close modal when clicking X
       closeBtn.onclick = function() {
         modal.style.display = 'none';
         modal.classList.remove('vhs-effect');
       }
       
       // Close modal when clicking outside
       window.onclick = function(event) {
         if (event.target == modal) {
           modal.style.display = 'none';
           modal.classList.remove('vhs-effect');
         }
       }
       
       // Close modal with Escape key
       $(document).keydown(function(e) {
         if (e.key === 'Escape' && modal.style.display === 'block') {
           modal.style.display = 'none';
           modal.classList.remove('vhs-effect');
         }
       });
       
       // Add click handlers to all media elements
       $(document).on('click', '.media-grid img, .scrollable-sidebar img, .video-item', function(e) {
         e.preventDefault();
         e.stopPropagation();
         openModal(this);
       });
       
       // Handle window resize for responsive design
       $(window).resize(function() {
         const isMobile = window.innerWidth <= 768;
         try {
           if ($("#flipbook").data('turn')) {
             const flipbookWidth = isMobile ? window.innerWidth - 20 : 900;
             const flipbookHeight = isMobile ? 400 : 600;
             $("#flipbook").turn('size', flipbookWidth, flipbookHeight);
           }
         } catch (error) {
           console.error('Error resizing flipbook:', error);
         }
       });
       
       // Add touch support for mobile
       let touchStartX = 0;
       let touchEndX = 0;
       
       $(document).on('touchstart', '#flipbook', function(e) {
         touchStartX = e.originalEvent.touches[0].clientX;
       });
       
       $(document).on('touchend', '#flipbook', function(e) {
         touchEndX = e.originalEvent.changedTouches[0].clientX;
         handleSwipe();
       });
       
       function handleSwipe() {
         const swipeThreshold = 50;
         const diff = touchStartX - touchEndX;
         
         if (Math.abs(diff) > swipeThreshold) {
           try {
             if (diff > 0) {
               // Swipe left - next page
               $("#flipbook").turn('next');
             } else {
               // Swipe right - previous page
               $("#flipbook").turn('previous');
             }
           } catch (error) {
             console.error('Error handling swipe:', error);
           }
         }
       }
       
       // Sleaze Bot functionality
       let sleazeBotActive = true;
       
       // Make functions globally accessible
       window.toggleSleazeBot = function() {
         sleazeBotActive = !sleazeBotActive;
         const botSection = document.getElementById('sleaze-bot-section');
         const toggleBtn = document.getElementById('sleaze-toggle');
         
         if (sleazeBotActive) {
           botSection.style.display = 'block';
           toggleBtn.textContent = 'Hide Sleaze Bot';
           toggleBtn.style.background = 'linear-gradient(to bottom, #ff6b6b, #ee5a24)';
         } else {
           botSection.style.display = 'none';
           toggleBtn.textContent = 'Show Sleaze Bot';
           toggleBtn.style.background = 'linear-gradient(to bottom, #800080, #4b0082)';
         }
       }
       
       let uploadedFile = null;
       
       window.handleImageUpload = function(event) {
         const file = event.target.files[0];
         if (!file) return;
         
         uploadedFile = file;
         
         // Show the image preview and style selection
         const resultDiv = document.getElementById('sleaze-result');
         const uploadBtn = document.getElementById('upload-btn');
         
         // Create preview
         const reader = new FileReader();
         reader.onload = function(e) {
           resultDiv.innerHTML = `
             <div class="image-preview">
               <h3>Image Uploaded! Choose Your Sleaze Style:</h3>
               <img src="${e.target.result}" alt="Uploaded image" style="max-width: 200px; border: 2px solid silver; margin: 10px;">
               <div class="style-buttons">
                 <button onclick="transformImage('sleaze1')" class="style-btn">Sleaze 1</button>
                 <button onclick="transformImage('sleaze2')" class="style-btn">Sleaze 2</button>
                 <button onclick="transformImage('sleaze3')" class="style-btn">Sleaze 3</button>
                 <button onclick="transformImage('shadow')" class="style-btn">Shadow</button>
                 <button onclick="transformImage('sleazify')" class="style-btn">Sleazify</button>
                 <button onclick="transformImage('megasleaze')" class="style-btn">Mega Sleaze</button>
                 <button onclick="transformImage('ultrasleaze')" class="style-btn">Ultra Sleaze</button>
                 <button onclick="transformImage('group')" class="style-btn">Group</button>
                 <button onclick="transformImage('flex')" class="style-btn">Flex</button>
               </div>
             </div>
           `;
         };
         reader.readAsDataURL(file);
       }
       
       window.transformImage = function(style) {
         if (!uploadedFile) return;
         
         const resultDiv = document.getElementById('sleaze-result');
         resultDiv.innerHTML = '<div class="loading">Adding that bling... üíé</div>';
         
         const formData = new FormData();
        formData.append('image', uploadedFile);
        formData.append('style', style);
         
        // Using Render bot URL
        fetch('https://sleaze-bot-web-3.onrender.com/transform', {
            method: 'POST',
            body: formData
          })
         .then(response => response.json())
         .then(data => {
           if (data.success) {
             resultDiv.innerHTML = `
               <div class="sleaze-result">
                 <h3>Your Sleaze Transformation (${style})</h3>
                                                     <img src="/result/${data.image_id}" alt="Sleaze transformation" 
                       style="max-width: 100%; border: 3px outset silver; box-shadow: 0 0 15px purple;">
                   <p class="keanu-quote">"Whoa... that's some serious bling action."</p>
                   <button onclick="downloadImage('/result/${data.image_id}')" class="control-btn">
                   Download Sleaze
                 </button>
                 <button onclick="location.reload()" class="control-btn" style="margin-left: 10px;">
                   Transform Another
                 </button>
               </div>
             `;
           } else {
             resultDiv.innerHTML = `<div class="error">Error: ${data.error}</div>`;
           }
         })
         .catch(error => {
           console.error('Error:', error);
           resultDiv.innerHTML = '<div class="error">Failed to transform image. Please try again.</div>';
         });
       }
       
       window.downloadImage = function(imageUrl) {
         const link = document.createElement('a');
         link.href = imageUrl;
         link.download = 'sleaze-transformation.png';
         document.body.appendChild(link);
         link.click();
         document.body.removeChild(link);
       }
     });
   </script>
</body>
</html>
